<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Media Manager | Maelstrom</title>
    <meta name="description" content="Maelstrom CMS Toolkit for Laravel and React">
    
    
    <link rel="preload" href="/assets/css/0.styles.f1a56b25.css" as="style"><link rel="preload" href="/assets/js/app.f96adb32.js" as="script"><link rel="preload" href="/assets/js/1.9e3271d1.js" as="script"><link rel="preload" href="/assets/js/33.d26733d1.js" as="script"><link rel="prefetch" href="/assets/js/10.c76e8adf.js"><link rel="prefetch" href="/assets/js/11.ec296ef6.js"><link rel="prefetch" href="/assets/js/12.74378800.js"><link rel="prefetch" href="/assets/js/13.11bb07a6.js"><link rel="prefetch" href="/assets/js/14.072f8872.js"><link rel="prefetch" href="/assets/js/15.3862886b.js"><link rel="prefetch" href="/assets/js/16.f514488e.js"><link rel="prefetch" href="/assets/js/17.0aa7627c.js"><link rel="prefetch" href="/assets/js/18.12a692f7.js"><link rel="prefetch" href="/assets/js/19.a5397dda.js"><link rel="prefetch" href="/assets/js/20.1639ed9a.js"><link rel="prefetch" href="/assets/js/21.b7b80aef.js"><link rel="prefetch" href="/assets/js/22.31c57663.js"><link rel="prefetch" href="/assets/js/23.f46ca734.js"><link rel="prefetch" href="/assets/js/24.6213e32c.js"><link rel="prefetch" href="/assets/js/25.031b6bdf.js"><link rel="prefetch" href="/assets/js/26.e81c0d72.js"><link rel="prefetch" href="/assets/js/27.4f180d1c.js"><link rel="prefetch" href="/assets/js/28.317d026a.js"><link rel="prefetch" href="/assets/js/29.8e1f599e.js"><link rel="prefetch" href="/assets/js/30.db09ef0c.js"><link rel="prefetch" href="/assets/js/31.0525538e.js"><link rel="prefetch" href="/assets/js/32.97dcc5f7.js"><link rel="prefetch" href="/assets/js/34.548301a2.js"><link rel="prefetch" href="/assets/js/35.681b5ab8.js"><link rel="prefetch" href="/assets/js/36.de6326b4.js"><link rel="prefetch" href="/assets/js/37.f92fca51.js"><link rel="prefetch" href="/assets/js/38.16051614.js"><link rel="prefetch" href="/assets/js/39.6d891362.js"><link rel="prefetch" href="/assets/js/4.ae971ba2.js"><link rel="prefetch" href="/assets/js/40.5982130b.js"><link rel="prefetch" href="/assets/js/41.aa6569ca.js"><link rel="prefetch" href="/assets/js/42.330fc3ac.js"><link rel="prefetch" href="/assets/js/43.79724370.js"><link rel="prefetch" href="/assets/js/44.8aee61da.js"><link rel="prefetch" href="/assets/js/45.28020f41.js"><link rel="prefetch" href="/assets/js/46.c68b3616.js"><link rel="prefetch" href="/assets/js/47.c13df925.js"><link rel="prefetch" href="/assets/js/48.34c79c27.js"><link rel="prefetch" href="/assets/js/5.7ab96c10.js"><link rel="prefetch" href="/assets/js/6.54a7c21d.js"><link rel="prefetch" href="/assets/js/7.1f3b41d4.js"><link rel="prefetch" href="/assets/js/8.f767c7fa.js"><link rel="prefetch" href="/assets/js/9.8dea8bc8.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.8bd8e4f4.js">
    <link rel="stylesheet" href="/assets/css/0.styles.f1a56b25.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/maelstrom-icon.svg" alt="Maelstrom" class="logo"> <span class="site-name can-hide">Maelstrom</span></a> <div class="links"><form id="search-form" role="search" class="algolia-search-wrapper search-box"><input id="algolia-search-input" class="search-query"></form> <nav class="nav-links can-hide"> <a href="https://github.com/maelstrom-cms/toolkit" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"> <a href="https://github.com/maelstrom-cms/toolkit" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Getting Started</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/getting-started/" class="sidebar-link">Introduction</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/getting-started/#how-it-works" class="sidebar-link">How it works</a></li><li class="sidebar-sub-header"><a href="/getting-started/#why-not" class="sidebar-link">Why Not</a></li></ul></li><li><a href="/getting-started/installing.html" class="sidebar-link">Installing</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/getting-started/installing.html#quick-start" class="sidebar-link">Quick Start</a></li><li class="sidebar-sub-header"><a href="/getting-started/installing.html#fresh-install" class="sidebar-link">Fresh Install</a></li><li class="sidebar-sub-header"><a href="/getting-started/installing.html#adding-to-existing-project" class="sidebar-link">Adding to existing project</a></li></ul></li><li><a href="/getting-started/my-first-panel.html" class="sidebar-link">Creating Your First Panel</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/getting-started/my-first-panel.html#a-model" class="sidebar-link">A Model</a></li><li class="sidebar-sub-header"><a href="/getting-started/my-first-panel.html#a-controller" class="sidebar-link">A Controller</a></li><li class="sidebar-sub-header"><a href="/getting-started/my-first-panel.html#a-route" class="sidebar-link">A Route</a></li><li class="sidebar-sub-header"><a href="/getting-started/my-first-panel.html#an-index-template" class="sidebar-link">An Index Template</a></li><li class="sidebar-sub-header"><a href="/getting-started/my-first-panel.html#a-form-template" class="sidebar-link">A Form Template</a></li></ul></li><li><a href="/components/sidebar.html" class="sidebar-link">Sidebar</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/components/sidebar.html#configuring" class="sidebar-link">Configuring</a></li><li class="sidebar-sub-header"><a href="/components/sidebar.html#menu-item-types" class="sidebar-link">Menu Item Types</a></li><li class="sidebar-sub-header"><a href="/components/sidebar.html#using-your-own-sidebar" class="sidebar-link">Using Your Own Sidebar</a></li></ul></li><li><a href="/getting-started/config.html" class="sidebar-link">The Config</a></li><li><a href="/getting-started/auth.html" class="sidebar-link">Authentication</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Components</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/components/panel.html" class="sidebar-link">Panel API</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/components/controllers.html" class="sidebar-link">Controllers</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/components/validation.html" class="sidebar-link">Validation</a></li><li><a href="/components/templates.html" class="sidebar-link">Templates</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/components/entry-table.html" class="sidebar-link">Entry Table</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/components/the-form.html" class="sidebar-link">The Form</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/components/columns.html" class="sidebar-link">Columns</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/components/columns.html#text" class="sidebar-link">Text</a></li><li class="sidebar-sub-header"><a href="/components/columns.html#text-link" class="sidebar-link">Text Link</a></li><li class="sidebar-sub-header"><a href="/components/columns.html#edit-link" class="sidebar-link">Edit Link</a></li><li class="sidebar-sub-header"><a href="/components/columns.html#video" class="sidebar-link">Video</a></li><li class="sidebar-sub-header"><a href="/components/columns.html#image" class="sidebar-link">Image</a></li><li class="sidebar-sub-header"><a href="/components/columns.html#icon" class="sidebar-link">Icon</a></li><li class="sidebar-sub-header"><a href="/components/columns.html#boolean" class="sidebar-link">Boolean</a></li><li class="sidebar-sub-header"><a href="/components/columns.html#media-manager" class="sidebar-link">Media Manager</a></li><li class="sidebar-sub-header"><a href="/components/columns.html#custom-columns" class="sidebar-link">Custom Columns</a></li></ul></li><li><a href="/components/input-fields.html" class="sidebar-link">Fields &amp; Inputs</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/components/input-fields.html#checkbox" class="sidebar-link">Checkbox</a></li><li class="sidebar-sub-header"><a href="/components/input-fields.html#colour-picker" class="sidebar-link">Colour Picker</a></li><li class="sidebar-sub-header"><a href="/components/input-fields.html#date-picker" class="sidebar-link">Date Picker</a></li><li class="sidebar-sub-header"><a href="/components/input-fields.html#date-range-picker" class="sidebar-link">Date Range Picker</a></li><li class="sidebar-sub-header"><a href="/components/input-fields.html#date-time-picker" class="sidebar-link">Date Time Picker</a></li><li class="sidebar-sub-header"><a href="/components/input-fields.html#time-picker" class="sidebar-link">Time Picker</a></li><li class="sidebar-sub-header"><a href="/components/input-fields.html#file-uploader" class="sidebar-link">File Uploader</a></li><li class="sidebar-sub-header"><a href="/components/input-fields.html#multiple-file-uploader" class="sidebar-link">Multiple File Uploader</a></li><li class="sidebar-sub-header"><a href="/components/input-fields.html#image-uploader" class="sidebar-link">Image Uploader</a></li><li class="sidebar-sub-header"><a href="/components/input-fields.html#multiple-image-uploader" class="sidebar-link">Multiple Image Uploader</a></li><li class="sidebar-sub-header"><a href="/components/input-fields.html#media-manager" class="sidebar-link">Media Manager</a></li><li class="sidebar-sub-header"><a href="/components/input-fields.html#icon-picker" class="sidebar-link">Icon Picker</a></li><li class="sidebar-sub-header"><a href="/components/input-fields.html#markdown-editor" class="sidebar-link">Markdown Editor</a></li><li class="sidebar-sub-header"><a href="/components/input-fields.html#number-input" class="sidebar-link">Number Input</a></li><li class="sidebar-sub-header"><a href="/components/input-fields.html#algolia-places-lookup" class="sidebar-link">Algolia Places Lookup</a></li><li class="sidebar-sub-header"><a href="/components/input-fields.html#radio-buttons" class="sidebar-link">Radio Buttons</a></li><li class="sidebar-sub-header"><a href="/components/input-fields.html#text-input" class="sidebar-link">Text Input</a></li><li class="sidebar-sub-header"><a href="/components/input-fields.html#text-area-input" class="sidebar-link">Text Area Input</a></li><li class="sidebar-sub-header"><a href="/components/input-fields.html#random-string-generator" class="sidebar-link">Random String Generator</a></li><li class="sidebar-sub-header"><a href="/components/input-fields.html#star-rating" class="sidebar-link">Star Rating</a></li><li class="sidebar-sub-header"><a href="/components/input-fields.html#secret-password-field" class="sidebar-link">Secret / Password Field</a></li><li class="sidebar-sub-header"><a href="/components/input-fields.html#select-menu" class="sidebar-link">Select Menu</a></li><li class="sidebar-sub-header"><a href="/components/input-fields.html#multiple-select-menu" class="sidebar-link">Multiple Select Menu</a></li><li class="sidebar-sub-header"><a href="/components/input-fields.html#tagging" class="sidebar-link">Tagging</a></li><li class="sidebar-sub-header"><a href="/components/input-fields.html#transfer-relationship" class="sidebar-link">Transfer / Relationship</a></li><li class="sidebar-sub-header"><a href="/components/input-fields.html#video-vimeo-and-youtube" class="sidebar-link">Video (Vimeo and YouTube)</a></li><li class="sidebar-sub-header"><a href="/components/input-fields.html#wysiwyg-editor" class="sidebar-link">WYSIWYG Editor</a></li><li class="sidebar-sub-header"><a href="/components/input-fields.html#switch-w-visibility-toggle" class="sidebar-link">Switch w/ Visibility Toggle</a></li><li class="sidebar-sub-header"><a href="/components/input-fields.html#repeatable-inputs" class="sidebar-link">Repeatable Inputs</a></li><li class="sidebar-sub-header"><a href="/components/input-fields.html#nested-resources" class="sidebar-link">Nested Resources</a></li><li class="sidebar-sub-header"><a href="/components/input-fields.html#custom-inputs-fields" class="sidebar-link">Custom Inputs / Fields</a></li></ul></li><li><a href="/components/buttons.html" class="sidebar-link">Buttons</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/components/buttons.html#button" class="sidebar-link">Button</a></li><li class="sidebar-sub-header"><a href="/components/buttons.html#link-button" class="sidebar-link">Link Button</a></li><li class="sidebar-sub-header"><a href="/components/buttons.html#form-controls" class="sidebar-link">Form Controls</a></li><li class="sidebar-sub-header"><a href="/components/buttons.html#nested-resources" class="sidebar-link">Nested Resources</a></li></ul></li><li><a href="/components/repeaters.html" class="sidebar-link">Repeaters</a></li><li><a href="/components/tabs.html" class="sidebar-link">Tabs</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/components/media-manager.html" class="active sidebar-link">Media Manager</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/components/flash-alert.html" class="sidebar-link">Alerts &amp; Flash Messages</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/components/form-options.html" class="sidebar-link">Form Options API</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/components/edit-profile.html" class="sidebar-link">Edit Profile</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/components/header.html" class="sidebar-link">Header</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/components/sidebar.html" class="sidebar-link">Sidebar</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/components/sidebar.html#configuring" class="sidebar-link">Configuring</a></li><li class="sidebar-sub-header"><a href="/components/sidebar.html#menu-item-types" class="sidebar-link">Menu Item Types</a></li><li class="sidebar-sub-header"><a href="/components/sidebar.html#using-your-own-sidebar" class="sidebar-link">Using Your Own Sidebar</a></li></ul></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Advance</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/advance/tailwind.html" class="sidebar-link">Tailwind</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/advance/filtering.html" class="sidebar-link">Filtering</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/advance/searching.html" class="sidebar-link">Searching</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/advance/ordering.html" class="sidebar-link">Ordering / Sorting</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/advance/pagination.html" class="sidebar-link">Pagination</a></li><li><a href="/advance/bulk-actions.html" class="sidebar-link">Bulk Actions</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/advance/trash.html" class="sidebar-link">Trash and Soft Deletes</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/advance/uploading.html" class="sidebar-link">Uploadables</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/advance/image-processing.html" class="sidebar-link">Image Uploadables</a></li><li><a href="/advance/entry-transformer.html" class="sidebar-link">Entry Transformer</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/advance/relationships.html" class="sidebar-link">Relationships</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/advance/overwriting-components.html" class="sidebar-link">Overwriting Components</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/advance/extending-components.html" class="sidebar-link">Extending Components</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/advance/custom-panels.html" class="sidebar-link">Custom / Modified Panels</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Examples</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/examples/blog-post.html" class="sidebar-link">🛠 How to create a blog post</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="media-manager"><a href="#media-manager" aria-hidden="true" class="header-anchor">#</a> Media Manager</h1> <p>We provide a basic media manager which allows you to easily get started with media management, rather than having a folder stray files you can see exactly what is uploaded and able to manage them.</p> <img src="/media-browser-preview.jpg" alt="Preview of Media Browser" class="m-w-full h-auto mt-4 shadow-md" style="width:700px;"> <h4 id="features"><a href="#features" aria-hidden="true" class="header-anchor">#</a> Features</h4> <ul><li>Searchable</li> <li>Tagging</li> <li>Thumbnails</li> <li>Alt text</li> <li>Long descriptions</li> <li>Site-wide replacements</li> <li>Drag and drop uploads</li> <li>Meta data</li></ul> <p>It also allows you to attach the same media across the site and change all attachments in one go, eventually we'll also introduce some editing tools such as cropping and resizing.</p> <p>The media manager stores everything within a <code>maelstrom_media</code> database table to prevent any conflicts, and exposes itself as <code>\Maelstrom\Media::class</code>.</p> <p>You're able to edit the <code>config/maelstrom.php</code> and define an alternative Model if you need to extend it, or use the IoC container to overwrite it when it's resolving.</p> <p>If you are using your own model make sure to implement the same methods and output formats.</p> <p>The media manager itself is not a standalone web page - although this can be added if you see fit by including the component on a page and exposing the appropriate props to it.</p> <p>It manifests itself in the form of a button which when clicked opens the manager and returns back the ID of the media item which can then be saved in the database.</p> <h3 id="including-the-button"><a href="#including-the-button" aria-hidden="true" class="header-anchor">#</a> Including the button</h3> <p>Including the media manager button in your form is the same as any other fields</p> <div class="language-php extra-class"><pre class="language-php"><code>@<span class="token keyword">include</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'maelstrom::components.media_manager'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>
    <span class="token single-quoted-string string">'name'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'supporting_images'</span><span class="token punctuation">,</span>
    <span class="token single-quoted-string string">'label'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'Supporting Images'</span><span class="token punctuation">,</span>
    <span class="token single-quoted-string string">'max_items'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'4'</span><span class="token punctuation">,</span>
    <span class="token comment">// ... other options e.g. help, required etc...</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre></div><img src="/photos-preview.jpg" alt="Preview of photo button" class="m-w-full h-auto mt-4 shadow-md" style="width:700px;"> <h3 id="supported-formats"><a href="#supported-formats" aria-hidden="true" class="header-anchor">#</a> Supported formats</h3> <p>By default we support the uploading of</p> <ul><li>Bitmap Images (png, jpg, gif, etc)</li> <li>SVG</li> <li>PDF</li></ul> <div class="warning custom-block"><p>Currently we do not support thumbnail generation for PDFs and SVG thumbnails are experimental.</p></div> <h3 id="changing-accepted-mime-types"><a href="#changing-accepted-mime-types" aria-hidden="true" class="header-anchor">#</a> Changing Accepted Mime Types</h3> <p>You're able to adjust the accepted mime types for the uploader by editing your <code>config/maelstrom.php</code> within <code>media_manager</code> key.</p> <h3 id="other-configurations"><a href="#other-configurations" aria-hidden="true" class="header-anchor">#</a> Other configurations</h3> <p>From within the <code>config/maelstrom.php</code> you're able to control some other options such as</p> <ul><li><code>enabled</code> - You can disable the media manager (buttons will still render)</li> <li><code>guard</code> - You can set some middleware to prevent access to the API</li> <li><code>disk</code> - Which disk should it save the assets to, e.g. S3, Rackspace etc</li> <li><code>model</code> - If you want a custom model pass in the FQN of one here</li> <li><code>mime_types</code> - Which mime types are allowed to upload</li> <li><code>thumbnails</code> - What size to generate the thumbnail at? Should be square for the media manager to render.</li> <li><code>variations</code> - Coming soon...</li></ul> <h3 id="setting-up-your-model"><a href="#setting-up-your-model" aria-hidden="true" class="header-anchor">#</a> Setting Up Your Model</h3> <p>You will need to save the ID of the media to your model, our <code>store</code> and <code>update</code> methods handle this, however you will need to make sure your casts and relationships are configured correctly.</p> <p>For multiple media attachments within an array make sure you cast the attribute correctly.</p> <h4 id="casting-on-the-immediate-model"><a href="#casting-on-the-immediate-model" aria-hidden="true" class="header-anchor">#</a> Casting on The Immediate Model</h4> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">class</span> <span class="token class-name">Page</span> <span class="token keyword">extends</span> <span class="token class-name">Model</span>
<span class="token punctuation">{</span>
    <span class="token keyword">protected</span> <span class="token variable">$casts</span> <span class="token operator">=</span> <span class="token punctuation">[</span>
        <span class="token single-quoted-string string">'featured_image'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'string'</span><span class="token punctuation">,</span> 
        <span class="token single-quoted-string string">'supporting_images'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'array'</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="relationships-on-intermediate-tables"><a href="#relationships-on-intermediate-tables" aria-hidden="true" class="header-anchor">#</a> Relationships on Intermediate Tables.</h4> <p>This is mainly down to you as you can structure your database as you like, however if you want to store the ID or array of IDs on the a relationship, then something like below.</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">class</span> <span class="token class-name">Page</span> <span class="token keyword">extends</span> <span class="token class-name">Model</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">featuredImage</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">belongsTo</span><span class="token punctuation">(</span>\<span class="token package">Maelstrom<span class="token punctuation">\</span>Media</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">supportingImages</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">belongsToMany</span><span class="token punctuation">(</span>\<span class="token package">Maelstrom<span class="token punctuation">\</span>Media</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="tip custom-block"><p>If you're going to do this, make sure you use the <code>setRelationships()</code> method on the Panel within the controller to let us know your structure.</p></div> <h4 id="within-the-repeater"><a href="#within-the-repeater" aria-hidden="true" class="header-anchor">#</a> Within The Repeater</h4> <p>If you're using the repeater then only the ID of the media will be saved within your array, this means when you pull out the data you'll need to convert the IDs into models e.g. Imagine your data was:</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// `repeater` column in your database.</span>

<span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
        <span class="token string">&quot;id&quot;</span><span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
        <span class="token string">&quot;title&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;New product photos.&quot;</span>
        <span class="token string">&quot;supporting_images&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;12&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;43&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre></div><p>You would need to convert <code>supporting_images</code> into an array of models.</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">getRepeaterContentAttribute</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">array_map</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token variable">$item</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token variable">$item</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token property">supporting_images</span> <span class="token operator">=</span> \<span class="token package">Maelstrom<span class="token punctuation">\</span>Media</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">whereIn</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'id'</span><span class="token punctuation">,</span> <span class="token variable">$item</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token property">supporting_images</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">return</span> <span class="token variable">$item</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'repeater'</span><span class="token punctuation">)</span> <span class="token operator">?</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Or you could flatten the array to extract all the IDs to reduce the number of queries and re-map them.</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">getRepeaterContentAttribute</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token variable">$ids</span> <span class="token operator">=</span> Arr<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">pluck</span><span class="token punctuation">(</span><span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token property">repeater</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'supporting_images'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token variable">$ids</span> <span class="token operator">=</span> Arr<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">flatten</span><span class="token punctuation">(</span><span class="token variable">$ids</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token variable">$ids</span> <span class="token operator">=</span> <span class="token function">array_unique</span><span class="token punctuation">(</span><span class="token variable">$ids</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token variable">$ids</span> <span class="token operator">=</span> <span class="token function">array_values</span><span class="token punctuation">(</span><span class="token variable">$ids</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token variable">$media</span> <span class="token operator">=</span> \<span class="token package">Maelstrom<span class="token punctuation">\</span>Media</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">whereIn</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'id'</span><span class="token punctuation">,</span> <span class="token variable">$ids</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token function">array_map</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token variable">$item</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token variable">$item</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token property">supporting_images</span> <span class="token operator">=</span> <span class="token variable">$media</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">whereIn</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'id'</span><span class="token punctuation">,</span> <span class="token variable">$item</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token property">supporting_images</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">return</span> <span class="token variable">$item</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>  <span class="token operator">?</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/components/tabs.html" class="prev">
          Tabs
        </a></span> <span class="next"><a href="/components/flash-alert.html">
          Alerts &amp; Flash Messages
        </a>
        →
      </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.f96adb32.js" defer></script><script src="/assets/js/1.9e3271d1.js" defer></script><script src="/assets/js/33.d26733d1.js" defer></script>
  </body>
</html>
